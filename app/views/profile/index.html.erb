<% content_for :profile_content do %>
    <div class="panel">
        <div class="panel-header">
            <div class="float-right">
                <%= link_to edit_profile_path(@user), class: 'btn btn-outline-custom btn-sm' do %>
                    <%= material_icon.create.style('font-size: 16px;') %>
                    Edit
                <% end %>
            </div>
            Contact Info
        </div>
        <div class="panel-body">
            <dl class="row">
                <dt class="col-sm-1"><span class="text-center"><%= material_icon.account_circle %></span></dt>
                <dd class="col-sm-11"><%= @user %></dd>
            </dl>
            <dl class="row">
                <dt class="col-sm-1"><span class="text-center"><%= material_icon.mail %></span></dt>
                <dd class="col-sm-11"><%= @user.email %></dd>
            </dl>
            <dl class="row" style="margin-bottom: 0px;">
                <dt class="col-sm-1"><span class="text-center"><%= material_icon.phone %></span></dt>
                <dd class="col-sm-11"><%= @user.phone ? @user.phone : material_icon.block %></dd>
            </dl>
        </div>
    </div>
<% end %>

<% content_for :dues_content do %>
    <div class="panel">
        <div class="panel-header">
            <div class="float-right">
                <% unless @user.paid_yearly_dues?(@year) %>
                    <form action="<%= profile_pay_dues_path %>" method="POST">
                        <script
                            src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                            data-key="<%= @stripe_api_key %>"
                            data-amount="<%= @user.amount_due_for_year_stripe(@year) %>"
                            data-name="Madison Pointe"
                            data-description="HOA Dues"
                            data-locale="auto"
                            data-billingAddress="true"
                            data-allowRememberMe="false"
                            data-label="Pay with card">
                        </script>
                        <input type="hidden" value="<%= form_authenticity_token %>" name="authenticity_token"/>
                    </form>
                <% end %>
            </div>
            <%= @year %> Dues
        </div>
        <div class="panel-body">
            <h5 class="text-<%= @user.paid_yearly_dues?(@year) ? 'success' : 'primary' %>">
                <%= @user.dues_for_year(@year) %>
            </h5>
        </div>
    </div>
<% end %>

<%= render 'profile/layout' %>
